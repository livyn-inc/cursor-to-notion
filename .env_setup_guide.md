# 環境変数設定ガイド

## 現在の状況
.envファイルは作成済みですが、プレースホルダー値のままです。

## 必要な設定

### 1. Notion API トークンの取得

1. **Notionにログイン**
   - https://www.notion.so にアクセス
   - アカウントでログイン

2. **インテグレーション作成**
   - https://www.notion.so/my-integrations にアクセス
   - 「新しいインテグレーション」をクリック
   - 名前: cursor_to_notion_test など
   - ワークスペース: 対象のワークスペースを選択
   - 「送信」をクリック

3. **トークンをコピー**
   - 作成されたインテグレーションの「Internal Integration Token」をコピー
   - 例: secret_abc123def456ghi789jkl012mno345pqr678stu901vwx234yz

### 2. NotionページURLの取得

1. **対象ページを開く**
   - Notionでテスト用のページを開く
   - 例: プロジェクトのルートページ

2. **URLをコピー**
   - ブラウザのアドレスバーからURLをコピー
   - 例: https://www.notion.so/your-workspace/Project-Docs-abc123def456ghi789jkl012mno345pqr678stu901vwx234yz

3. **URL形式の確認**
   - ✅ 正しい形式: https://www.notion.so/workspace/Page-Title-32文字のID
   - ❌ 間違った形式: https://notion.so/Page-Title (IDなし)

### 3. ページにインテグレーションを共有

1. **ページ設定を開く**
   - 対象ページの右上の「...」メニューをクリック
   - 「共有」を選択

2. **インテグレーションを追加**
   - 「招待」セクションで「インテグレーションを招待」をクリック
   - 作成したインテグレーション名を検索して選択
   - 「招待」をクリック

### 4. .envファイルの更新

以下のコマンドで.envファイルを更新してください：

```bash
# 実際の値に置き換えてください
echo "NOTION_TOKEN=secret_your_actual_token_here" > .env
echo "NOTION_ROOT_URL=https://www.notion.so/your-workspace/your-actual-page-id" >> .env
```

### 5. 設定確認

```bash
# 環境変数の確認
source .env
echo "NOTION_TOKEN: $NOTION_TOKEN"
echo "NOTION_ROOT_URL: $NOTION_ROOT_URL"
```

## トラブルシューティング

### よくある問題

1. **トークンが無効**
   - インテグレーションが正しく作成されているか確認
   - トークンがコピー時に切れていないか確認

2. **ページURLが無効**
   - URLに32文字のIDが含まれているか確認
   - ページがNotionで正常に表示できるか確認

3. **権限エラー**
   - インテグレーションがページに共有されているか確認
   - ワークスペースの権限があるか確認

### テスト方法

設定完了後、以下のコマンドでテストできます：

```bash
# 統合テストの実行
cd documents/11_QA実行/integration_tests/scenarios/hybrid_test_suite
./run_scenario1_automated.sh
```

## 注意事項

- .envファイルはGitにコミットしないでください
- トークンは機密情報として取り扱ってください
- テスト用のワークスペースを使用することを推奨します
